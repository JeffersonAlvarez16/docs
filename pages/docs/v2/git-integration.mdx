import Doc from '~/components/layout/docs'
import Card from '~/components/card'
import { Image } from '~/components/media'
import Caption from '~/components/text/caption'
import Note from '~/components/text/note'
import Collapse, { CollapseGroup } from '~/components/collapse'
import GitHubDefaultBehaviour from '~/components/git-mdx/github/default-behaviour.mdx'
import GitHubEnvironmentVariables from '~/components/git-mdx/github/environment-variables.mdx'
import GitHubPermissions from '~/components/git-mdx/github/permissions.mdx'
import GitHubWorkflowExtension from '~/components/git-mdx/github/extended-workflow.mdx'
import GitLabDefaultBehaviour from '~/components/git-mdx/gitlab/default-behaviour.mdx'
import GitLabEnvironmentVariables from '~/components/git-mdx/gitlab/environment-variables.mdx'
import BitbucketDefaultBehaviour from '~/components/git-mdx/bitbucket/default-behaviour.mdx'
import BitbucketEnvironmentVariables from '~/components/git-mdx/bitbucket/environment-variables.mdx'

export const meta = {
  title: 'Git Integration',
  description:
    "How to use the ZEIT Now Git Integrations for GitHub, GitLab, or Bitbucket to automatic deploy from your project's repository for each push and ship to production on merge to the main branch.",
  editUrl: 'pages/docs/v2/git-integration.mdx',
  lastEdited: '2020-01-14T10:31:04.000Z'
}

ZEIT Now provides integrations for your [GitHub](#github), [GitLab](#gitlab), and [Bitbucket](#bitbucket) projects, allowing for **automatic deployments on every branch push** and merge to the default branch.

<Image
  src={`${process.env.ASSETS}/docs/git-integrations/introduction.png`}
  width={2178/3}
  height={888/3}
/>
<Caption style={{marginTop: '-40px'}}>A deployment from a Now for GitLab push.</Caption>

The ZEIT Now Git integrations provide the following benefits:

- [Preview Deployments](/docs/v2/platform/deployments#preview) for **every push**.
- **[Production Deployments](/docs/v2/platform/deployments#production) for the most recent changes** from the default branch.
- **Instant rollbacks when reverting changes** assigned to a custom domain.

The easiest way to use a Git integration is to think of your **default branch as production**. Every time a pull/merge request is made to the default branch, Now will **create a unique deployment**, allowing you to **view the changes in a preview environment before merging**.

When merging to the default branch, a **Production Deployment** is made, making the latest changes available to assigned custom domains automatically.

## Available Integrations

- [GitHub](#zeit-now-for-github)
- [GitLab](#zeit-now-for-gitlab)
- [Bitbucket](#zeit-now-for-bitbucket)

## Installation

You can install any Git integration directly from your dashboard by clicking ["New Project"](/new), then from the GitHub, GitLab, or Bitbucket tabs in the "From your existing code" section, clicking the connect button.

[ Image of "From your existing code" section ]

---

## ZEIT Now for GitHub

The ZEIT Now for GitHub integration automatically deploys your GitHub projects with [ZEIT Now](/now), providing [Preview Deployment URLs](/docs/v2/platform/deployments#preview), and automatic [Custom Domain](/docs/v2/custom-domains) updates.

<Image
  src={`${process.env.IMAGE_ASSETS_URL}/github-v2/first-image.png`}
  width={1896 / 2}
  height={1217 / 2}
  shadow
/>
<Caption>ZEIT Now for GitHub deploying a pull request automatically.</Caption>

### Connecting with GitHub

Link your GitHub and ZEIT accounts from your dashboard by clicking the ["New Project"](/new) button followed by the "Install Now for GitHub" button from the "GitHub" tab under the "From your existing code" section.

[ image of "install now for github" section ]

Once you have authorized the GitHub integration, you will redirect back to the "New Project" page where you can create a new project from an existing repository by clicking the "New Project from GitHub" button under the "GitHub" tab or by selecting a template and creating a GitHub repository from it.

<Image
  src={`${process.env.IMAGE_ASSETS_URL}/docs/now-for-github/profile-selection.png`}
  width={1638/2}
  height={1268/2}
/>
<Caption>The account or organization selection step on GitHub.</Caption>

For more information on deploying projects, read [the ZEIT Now introduction documentation](/docs).

### More Information About ZEIT Now for GitHub

For more information, such as a reference for default environment variables, expand the relevant details view below.

<CollapseGroup>
  <Collapse title="Default Behaviour">
    <GitHubDefaultBehaviour />
  </Collapse>

<Collapse title="Extending Your GitHub Workflow">
  <GitHubWorkflowExtension />
</Collapse>

<Collapse title="Included Environment Variables">
  <GitHubEnvironmentVariables />
</Collapse>

<Collapse title="Required Permissions">
    <GitHubPermissions />
  </Collapse>
</CollapseGroup>

---

## ZEIT Now for GitLab

The ZEIT Now for GitLab integration automatically deploys your GitHub projects with [ZEIT Now](/now), providing [Preview Deployment URLs](/docs/v2/platform/deployments#preview), and automatic [Custom Domain](/docs/v2/custom-domains) updates.

<Image
  src={`${process.env.ASSETS}/guides/getting-started-with-now-for-gitlab/deploy-comment.png`}
  width={2080/2.5}
  height={1392/2.5}
/>
<Caption style={{marginTop: '-40px'}}>A deployment from a Now for GitLab push.</Caption>

### Connecting with GitLab

Get started from your dashboard by clicking the ["New Project"](/new) button followed by "Connect with GitLab" from the "GitLab" tab under "From your existing code".

[ image of "connect with gitlab" section ]

Once you have authorized the GitLab integration, you will redirect back to the "New Project" page where you can create a new project from an existing repository by clicking the "New Project from GitLab" button under the "GitLab" tab or by selecting a template and creating a GitLab repository from it.

For more information on deploying projects, read [the ZEIT Now introduction documentation](/docs).

### More Information About Now for GitLab

For more information, such as a reference for default environment variables, expand the relevant details view below.

<CollapseGroup>
  <Collapse title="Default Behaviour">
    <GitLabDefaultBehaviour />
  </Collapse>

<Collapse title="Included Environment Variables">
    <GitHubEnvironmentVariables />
  </Collapse>
</CollapseGroup>

---

## ZEIT Now for Bitbucket

The ZEIT Now for Bitbucket integration automatically deploys your GitHub projects with [ZEIT Now](/now), providing [Preview Deployment URLs](/docs/v2/platform/deployments#preview), and automatic [Custom Domain](/docs/v2/custom-domains) updates.

<Image
  src={`${process.env.ASSETS}/docs/now-for-bitbucket/project-commit.png`}
  width={2240/2.5}
  height={1282/2.5}
/>
<Caption style={{marginTop: '-40px'}}>Commits pushed to Bitbucket are automatically built and deployed with Now.</Caption>

### Connecting with Bitbucket

Get started from your dashboard by clicking the ["New Project"](/new) button followed by "Connect with Bitbucket" from the "Bitbucket" tab under "From your existing code".

[ image of "connect with bitbucket" section ]

Once you have authorized the Bitbucket integration, you will redirect back to the "New Project" page where you can create a new project from an existing repository by clicking the "New Project from Bitbucket" button under the "Bitbucket" tab or by selecting a template and creating a Bitbucket repo from it.

For more information on deploying projects, read [the ZEIT Now introduction documentation](/docs).

### More Information About Now for Bitbucket

For more information, such as a reference for default environment variables, expand the relevant details view below.

<CollapseGroup>
  <Collapse title="Default Behaviour">
    <BitbucketDefaultBehaviour />
  </Collapse>

<Collapse title="Included Environment Variables">
    <BitbucketEnvironmentVariables />
  </Collapse>
</CollapseGroup>

---

## Related

For more information on what to do next, we recommend the following articles:

<Card title="Using Custom Domains" href="/docs/v2/custom-domains">
  Once deployed, your projects can be assigned to a custom domain or specified
  name or your choice to give it a primary place to see the latest version of
  your application.
</Card>

export default ({ children }) => <Doc meta={meta}>{children}</Doc>

export const config = {
  amp: 'hybrid'
}
